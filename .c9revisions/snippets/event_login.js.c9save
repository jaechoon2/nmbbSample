{"ts":1357695270034,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var handleContactEvent = function(eventMessage) {\n  socket.emit(eventName, eventMessage);\n}\n\nvar subscribeToAccount = function(accountId) {\n  var eventName = 'event:' + accountId;\n  app.addEventListener(eventName, handleContactEvent);\n  console.log('Subscribing to ' + eventName);\n};\n\nmodels.Account.findById(accountId, function subscribeToFriendFeeds(account) {\n  var subscribedAccounts = {};\n  sAccount = account;\n  account.contacts.forEach(function(contact) {\n    if ( !subscribedAccounts[contact.accountId]) {\n      subscribeToAccount(contact.accountId);\n      subscribedAccounts[contact.accountId] = true;\n    }\n  });\n\n  if (!subscribedAccounts[accountId]) {\n    // Subscribe to my own updates\n    subscribeToAccount(accountId);\n  }\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":742}]],"length":742}
{"contributors":[],"silentsave":false,"ts":1358122763558,"patch":[[{"diffs":[[0,"sage);\n}"],[1,";"],[0,"\n\nvar su"]],"start1":83,"start2":83,"length1":16,"length2":17}]],"length":743,"saved":false}
{"ts":1358122769813,"patch":[[{"diffs":[[0,"\n  }\n});"],[-1,"\n"]],"start1":734,"start2":734,"length1":9,"length2":8}]],"length":742,"saved":false}
{"ts":1358122772629,"patch":[[{"diffs":[[0,"ge) {\n  "],[-1,""],[0,""],[1,"  "],[0,"socket.e"]],"start1":44,"start2":44,"length1":16,"length2":18},{"diffs":[[0,"ccountId) {\n"],[1,"  "],[0,"  var eventN"]],"start1":131,"start2":131,"length1":24,"length2":26},{"diffs":[[0,"ountId;\n"],[1,"  "],[0,"  app.ad"]],"start1":177,"start2":177,"length1":16,"length2":18},{"diffs":[[0,"Event);\n"],[1,"  "],[0,"  consol"]],"start1":234,"start2":234,"length1":16,"length2":18},{"diffs":[[0,"ount) {\n"],[1,"  "],[0,"  var su"]],"start1":364,"start2":364,"length1":16,"length2":18},{"diffs":[[0,"s = {};\n"],[1,"  "],[0,"  sAccou"]],"start1":397,"start2":397,"length1":16,"length2":18},{"diffs":[[0,"ccount;\n"],[1,"  "],[0,"  accoun"]],"start1":421,"start2":421,"length1":16,"length2":18},{"diffs":[[0,") {\n"],[1,"    "],[0,"    if ("],[-1," "],[0,"!sub"]],"start1":474,"start2":474,"length1":17,"length2":20},{"diffs":[[0,"d]) {\n      "],[1," "],[1,"     "],[0,"subscribeToA"]],"start1":526,"start2":526,"length1":24,"length2":30},{"diffs":[[0,"tId);\n      "],[1," "],[1,"     "],[0,"subscribedAc"]],"start1":577,"start2":577,"length1":24,"length2":30},{"diffs":[[0,"ue;\n"],[1,"    "],[0,"    }\n"],[1,"  "],[0,"  })"]],"start1":637,"start2":637,"length1":14,"length2":20},{"diffs":[[0," });\n\n  "],[1," "],[1," "],[0,"if (!sub"]],"start1":654,"start2":654,"length1":16,"length2":18},{"diffs":[[0,"countId]) {\n"],[1,"    "],[0,"    // Subsc"]],"start1":690,"start2":690,"length1":24,"length2":28},{"diffs":[[0,"updates\n    "],[1," "],[1,"   "],[0,"subscribeToA"]],"start1":733,"start2":733,"length1":24,"length2":28},{"diffs":[[0,"untId);\n"],[1,"  "],[0,"  }\n});"]],"start1":772,"start2":772,"length1":15,"length2":17}]],"length":789,"saved":false}
